---
title: 单元测试NUnit
date: 2021-03-24 20:56:00
updated: 2021-03-24 20:56:00
id: ml-20210324-205600-g101
categories:
	- 基础
	- 单元测试
tags: 
	- 基础
	- 单元测试
	- CSharp
---

之所以选择`NUnit`是因为`Unity`的测试也是这玩意.  
这是开源的,你可以在`GitHub`找到它的源码.  
本文为阅读`单元测试之道`后编写.

> 下面是比较好的单元测试文档地址

[NUnit文档地址][NUnitDoc_Link]  
[.NET Core 指南][DotNetCoreUTDoc_Link]  
[Visual Studio 文档][VisualStudioUTDoc_Link]

<!--more-->

# 安装NUnit

虽然你可以使用vs自带的`MSTest`, 但是NUnit也是不错的选择.  
在NuGet包管理器中搜索安装`NUnit`, `NUnit3TestAdapter` 这样你就可以在创建单元测试的时候使用NUnit了

# 测试内容

你可能需要一些指导, 应该怎么选择测试代码.  
编写测试的时候, 你需要思考下面的问题

> 你可能需要一些本地配置文件用于测试, 由于是你自用且不会发布的, txt就够了.  
>如果出现错误, 你可能需要检查一下数据是否错误或者过时了.. 相比于每次都全额通过的测试代码, 文件或参数出错的可能性更高.

> 不一定需要满足以下全部条件, 你应该按需增加测试内容.

## 结果是否正确

就是以正常的输入是否能得到预期的结果  
如果你不知道什么是正确的输入或预期的结果, 你可能需要再次观看文档或者询问相关人员.

> 需求是变化的, 这一项也可能发生变化.

## 边界是否检查过了

很好理解, 你需要参数的极限值, 比如 0个,1个,Max个,或者实际参数的边界值 Max Min什么的.

> 例子

* 完全伪造的**不可能数据**, 比如一串乱码.
* **错误的格式**, 比如没有结尾的邮箱号.
* **空值**或者**部分空值**, 这里包含"",0,null
* 一些代码上合理单**逻辑不合理**的数据, 比如年龄=10000
* 输入**明显不满足**的数据, 比如要求一个连续数字, 你给一个不连续的.
* **颠覆顺序**, 比如没有登录就尝试消费.

需要满足以下内容

* 和预期一致的或非一致的
* 顺序的或乱序的
* 引用外部代码的
* 不存在的
* 范围内地和范围外的
* 不满足基本条件的
* 满足顺序和不满足顺序的

## 检查反向内容

如果你向数据库插入一条数据, 你可能需要查询数据库来校验是否成功.

> 此时不应该使用你自己的代码, 或许可以尝试原生的无错代码, 以免*双向错误*.  
> 也可以使用经过验证的代码,但是记住,**一次只修改其中的一项**.

## 交叉检查结果

通常有多重方法满足条件, 为一种编写测试, 用另一种验证结果.

## 是否拥有强制错误抛出

是否有异常处理机制.

* 网络异常
* 磁盘异常(IO)
* 时钟问题
* 内存占用问题
* 分辨率问题

> 基本的Null只是小儿科

## 是否满足性能要求

运行时间如何?

有适合一个算法可能因为输入增多而指数级的消耗性能. 你可能需要编写一些针对性的测试.  
这些测试通常都很消耗性能或者时间, 你可以将他们归类, 之后每天晚上(每周)测试一次.

```
最好的编写测试方法是, 编写一个测试后, 询问自己还有什么可能错.
```

## 注意事项

> 任何索引都应该被大量测试

> 除了检测结果,你还应该检测状态变化


# 快速开始

安装好两个包.  
现在点击解决方案,添加,搜索`NUnit`,并选择Nunit测试项目.

> 命名应该和你要测试的程序集同名,并在后方加上`Test`或者`_Test`.这样他们就能在名称排序中紧挨在一起,方便查找.

之后打开视图,测试资源管理器.  
点击运行全部测试,看到全部通过.  

之后就随意添加单元测试吧.

# 待续

Log

共享上下文

分组到两个,怎么跑,如果跑一次,另一次错了怎么办.

Propchange(属性变化代理)

# 完毕

**感谢您的观看!**  
本文来自 [ML-Blog][ML-Blog_Link]

<!-- 图片 -->

<!-- 链接 -->

[NUnitDoc_Link]:https://docs.nunit.org/articles/nunit/intro.html "NUnitDoc"
[DotNetCoreUTDoc_Link]:https://www.bookstack.cn/read/dotnet/7bc375a213bb0ecc.md ".NetCore单元测试文档"
[VisualStudioUTDoc_Link]:https://docs.microsoft.com/zh-cn/visualstudio/test/unit-test-basics?view=vs-2019 "VisualStudio单元测试文档"


<!-- 水印 -->
[ML-Blog_Link]:https://userminghaoli.github.io/ "我的博客"
